{% include 'bold-cart-item' with item %}
<div class="ac-table-cart__row item {{ item.product.handle }}" data-product-id="{{ item.variant.id }}">
    <div class="ac-table-cart__cell ac-table-cart__cell--image">
        {% if item.variant.image %}
            {% assign variantImg = item.variant.image | img_url: "compact" %}
        {% else %}
            {% assign variantImg = item.product.featured_image | img_url: "compact" %}
        {% endif %}
        <img src="{{ variantImg }}"  alt="{{ item.product.title }}" />
    </div>
    <div class="ac-table-cart__cell ac-table-cart__cell--title">
        <a href="{% if item.price > 0 %}{{ item.url }}{% else %}javascript:void(0);{% endif %}">
            <p class="text">
                {{ item.product.title| replace_first: '|', '<span>' }}
                {% if item.product.tags contains 'final sale' %}<span class="final-sale">**Final Sale**</span>{% endif %}
            </p>
        </a>
        {% unless item.variant.title contains 'Default' %}
            <p class="ac-text--truncate">{{ item.variant.title }}</p>
        {% endunless %}
        {% for p in item.properties %}
            {% unless p.first contains "swell" or p.first contains "offer_type"%}
                {% unless p.last == blank %}
                    <p>
                        {{ p.first }}:
                        {% if p.last contains '/uploads/' %}
                            <a href="{% if item.price > 0 %}{{ p.last }}{% else %}javascript:void(0);{% endif %}">{{ p.last | split: '/' | last }}</a>
                        {% else %}
                            {{ p.last }}
                        {% endif %}
                    </p>
                {% endunless %}
            {% endunless %}
        {% endfor %}

        {% if item.product.tags contains 'salon-merch' %}
            <p class="not__qualified">does not qualify for free shipping</p>
        {% endif %}

        {% if item.product.tags contains 'final sale'  %}
            <p class="not__qualified">cannnot be combined with any other promotion</p>
        {% endif %}
    </div>
    <div class="ac-table-cart__cell ac-table-cart__cell--unit-price" data-price="{{item.price}}">
        {% assign orig =  item.line_price %}
        {% assign linex = item.variant.price | times: item.quantity %}
        {% assign diff = linex | minus:  orig %}
        {% assign notsame = false %}
        {% if diff != 0 %}
            {% assign notsame = true %}
        {% endif %}
        {% assign nospecial = false %}
        {% for collection in item.product.collections %}
            {% if "excludeHMS" == collection.title %}
                {% assign nospecial = true %}
            {% endif %}
        {% endfor %}
        <!-- {{ orig }}  {{ linex }}  {{ diff }} {{ notsame }} {{nospecial}} cartitem -->
        {% if nospecial %}
        {% else %}
            {% if item.variant.compare_at_price > item.price or customer.tags contains 'Pro' or customer.tags contains 'HMS' or notsame%}
                <div class="retail">
                    {% if customer.tags contains 'Pro' or customer.tags contains 'HMS' or notsame%}
                        {% if item.line_price == 0 %}
                        {% else%}
                            <span>{{item.variant.price | money | remove: ".00" }}</span>
                        {% endif %}
                    {% endif %}

                    {% if item.variant.compare_at_price > item.price %}
                        {% if item.line_price == 0 %}
                        {% else%}
                            <span>{{item.variant.compare_at_price | money | remove: ".00" }}</span>
                        {% endif %}
                    {% endif %}
                </div>
            {% endif %}
        {% endif %}

        {% if item.price > 0 %}
            <div class="deal {% if item.variant.compare_at_price > item.price or  customer.tags contains 'Pro' or customer.tags contains 'HMS' or notsame%}disc{%endif%}">
                <span>{{ item.price | money_without_currency | remove: ".00" }}<br> points</span>
            </div>
        {% else %}
            {% if item.product.type == 'Custom Bundle' %}
                {{ item.original_price | money_without_trailing_zeros }}
            {% else %}
                FREE
            {% endif %}
        {% endif %}



    </div>
    <div class="ac-table-cart__cell ac-table-cart__cell--qtty qtty">
        <div class="wrap clearfix">
            {% if item.price > 0 or item.variant.id == 1771451940882%}
                <input type="button" value="&ndash;" class="minus animation">
                <input readonly type="number" step="1" id="updates_{{ item.id }}" name="updates[]" value="{{ item.quantity }}" title="Qty" size="4" min="1" max="{{ available }}" class="text quantity replace">
                <input type="button" value="+" class="plus animation">
            {% else %}
                <div class="hide"><input type="number" step="1" id="updates_{{ item.id }}" name="updates[]" value="{{ item.quantity }}" title="Qty" size="4" min="1" max="{{ available }}" class="text quantity replace"></div>
                <input type="number" step="1" value="{{ item.quantity }}" title="Qty" size="4" min="1" class="text quantity replace" disabled>
            {% endif %}
        </div>
    </div>
    <div class="ac-table-cart__cell ac-table-cart__cell--total-price">
        {% if item.variant.compare_at_price > item.price or customer.tags contains 'Pro' or customer.tags contains 'HMS' or notsame%}
            <div class="retail desktop">
                {% if item.line_price == 0 %}
                {% else%}
                    <span>{{ item.line_price | money | remove: ".00" }}</span>
                {%endif%}
            </div>
        {% endif %}

        {% if item.variant.compare_at_price > item.price or customer.tags contains 'Pro' or customer.tags contains 'HMS' or notsame%}
            <div class="retail mobile">
                {% if customer.tags contains 'Pro' or customer.tags contains 'HMS' or notsame%}<span>{{item.variant.price | times: item.quantity | money | remove: ".00" }}</span>{% endif %}
                {% if item.variant.compare_at_price > item.price %}<span>{{item.variant.compare_at_price | money | remove: ".00" }}</span>{% endif %}
            </div>
        {% endif %}

        {% if item.price > 0 %}
            <div class="deal {% if item.variant.compare_at_price > item.price or customer.tags contains 'Pro' or customer.tags contains 'HMS' or notsame%}disc mobile{%endif%}">
                <span>{{ item.line_price | money_without_currency | remove: ".00" }}<br> points</span>
            </div>
        {% else %}
            {% if item.product.type == 'Custom Bundle' %}
                {{ item.original_line_price | money_without_trailing_zeros }}
            {% else %}
                FREE
            {% endif %}
        {% endif %}
    </div>
    <div class="ac-table-cart__cell ac-table-cart__cell--remove">
        <a class="remove-from-cart animation" href="/cart/change?line={{ forloop.index }}&quantity=0">
            <svg class="closer icon" width="20" height="20">
                <use xlink:href="#closeIcon"></use>
            </svg>
        </a>
    </div>
</div>